<div class="d-flex justify-content-center align-items-start  pt-5">

  <div class="card text-light text-center shadow-lg p-5 bg-black bg-opacity-75 rounded-4 mt-4"
       style="max-width: 600px; min-height: 500px;
              border: 1px solid rgba(255,255,255,0.12);
              background: linear-gradient(160deg, #3b3b3bff, #040404ff, #171717ff);
              box-shadow: 0 12px 70px rgba(0,0,0,0.9),
                          inset 0 1px 5px rgba(255,255,255,0.15),
                          inset 0 -3px 10px rgba(0,0,0,0.6);
              backdrop-filter: blur(8px);">

    <!-- Sommelier Name -->
    <h1 class="display-6 mb-3"
        style="background: linear-gradient(90deg, #f5f5dc, #daa520, #8b4513);
               -webkit-background-clip: text;
               -webkit-text-fill-color: transparent;
               text-shadow: 0 0 15px rgba(218,165,32,0.4);">
      <%= @chat.mood.name %>
    </h1>

    <!-- Chat window -->
    <div id="chat-window"
         class="text-start p-3 rounded-4 overflow-auto"
         style="height: 350px;
                border: 1px solid rgba(255,255,255,0.15);
                box-shadow: inset 0 0 10px rgba(0,0,0,0.5);">

      <% @chat.messages.each do |message| %>
        <p class="<%= message.role == 'assistant' ? 'text-warning' : 'text-info' %>">
          <strong><%= message.role.capitalize %>:</strong>
          <%= message.content %>
        </p>
      <% end %>
    </div>

    <!-- Form -->
    <div class="mt-4">

      <%= form_with model: [@chat, Message.new],
              local: true,
              class: "input-group" do |f| %>

        <%= f.text_field :content,
             class: "form-control text-light border-secondary",
             placeholder: "Type your message..." %>

        <button class="btn btn-gold fw-bold px-4" type="submit">
          Send
        </button>

      <% end %>

    </div>

    <!-- Add to Order -->
    <div class="mt-4">
      <%= button_to "Add to Order",
            order_items_path,
            method: :post,
            class: "btn btn-gold btn-lg px-4 fw-bold",
            form: { data: { turbo: false } } %>
    </div>

  </div>
</div>
